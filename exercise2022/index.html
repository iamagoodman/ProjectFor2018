<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  姓名： <input type="text" id="userName">
  <script>
    var arr1 = [2, 1, 4, 5, 10, 3, 4];
    function maopao (arr) {
      for (var i = 0; i < arr.length; i++) {
        for (var j = 0; j < arr.length - i; j++) {
          if (arr[j] > arr[j + 1]) {
            var cur = arr[j];
            arr[j] = arr[j + 1];
            arr[j + 1] = cur;
          }
        }
      }
      console.log(arr);
    }
    maopao(arr1);
    function light1 () {
      setTimeout(() => {
        console.log('red');
        setTimeout(() => {
          console.log('green');
          setTimeout(() => {
            console.log('yellow');
            light1();
          }, 1000);
        }, 1000);
      }, 1000);
    }
    // light1();
    async function sleep (time) {
      return new Promise((resove) => {
        setTimeout(() => {
          resove();
        }, time);
      })
    }
    async function changeColor (color) {
      console.log(color);
      await sleep(1000);
    }
    async function run () {
      while (true) {
        await changeColor('red');
        await changeColor('green');
        await changeColor('yellow');
      }
    }
    // run();

    function sleep2 (time) {
      return new Promise((resove) => {
        setTimeout(() => {
          resove();
        }, time);
      })
    }
    function changeColor2 (color) {
      return new Promise((resove) => {
        console.log(color);
        sleep2(1000).then(() => {
          resove();
        });
      })
    }
    function run2 () {
      return new Promise((resove) => {
        changeColor2('red').then(() => {
          changeColor2('green').then(() => {
            changeColor2('yellow').then(() => {
              run2();
            })
          })
        })
      });
    }
    // run2();
    function getIndex (arr, target) {
      console.time();
      var max = arr.length - 1;
      var min = 0;
      while (min <= max) {
        var mid = Math.floor((max + min) / 2);
        if (target < arr[mid]) {
          max = mid - 1;
        } else if (target > arr[mid]) {
          min = mid + 1;
        } else {
          console.timeEnd();
          return mid;
        }
      }
    }
    var arr2 = [];
    for (var i = 0; i < 100000; i++) {
      arr2.push(i);
    }
    var index_ = getIndex(arr2, 15900);
    console.log(index_);
    function getIndex2 (arr, target) {
      console.time('111');
      for (var i = 0; i < arr.length; i++) {
        if (arr[i] === target) {
          console.timeEnd('111');
          return i;
        }
      }
    }
    var index2_ = getIndex2(arr2, 15900);
    console.log(index2_);

    let template = '我是{{name}}，年龄{{age}}，性别{{sex}}';
    let data = { name: '姓名', age: 18 };
    var str = render(template, data);
    console.log(str);
    function render (template, data) {
      var reg = /\{\{(\w+)\}\}/;
      if (reg.test(template)) {
        const key = reg.exec(template)[1];
        template = template.replace(reg, data[key]);
        return render(template, data);
      }
      return template;
    }

    var baseObj = {
      name: 'frank',
      sex: '1',
      age: 18
    };
    var name = 'fuck';
    function say (sex, age) {
      console.log(`i am ${this.name}我性别是${sex}我${age}大了`)
    };
    // say();
    say.bind(this, '0', 20)();
    say.call(baseObj, '6', 90);
    say.apply(data, ['10', 18]);


    const fangdou = (fn, delay) => {
      let timer = null;
      return (...args) => {
        if (timer) clearTimeout(timer);
        timer = setTimeout(() => {
          fn.apply(this, args);
        }, delay);
      }
    }
    function search (e) {
      console.log(e.target.value);
    }
    const fd = fangdou(search, 1000);
    // document.getElementById('userName').addEventListener('input', fd);
    const jieliu = (fn, delay = 1000) => {
      let flag = true;
      return (...args) => {
        if (!flag) return;
        flag = false;
        setTimeout(() => {
          fn.apply(this, args);
          flag = true;
        }, delay);
      }
    }
    const jl = jieliu(search, 1000);
    document.getElementById('userName').addEventListener('input', jl);

    var arr3 = [1, 2, 3, 4, 5, 6, 6, 7, 7, 8, 9, 9, 0, 10];
    function qucong (arr) {
      var arrCopy = [];
      for (var i = 0; i < arr.length; i++) {
        var current = arr[i];
        console.log(current);
        if (arrCopy.indexOf(current) == -1) {
          arrCopy.push(current);
        }
      }
      console.log(arrCopy);
    }
    qucong(arr3);
  </script>
</body>

</html>